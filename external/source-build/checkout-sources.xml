<?xml version="1.0" encoding="iso-8859-1"?>

<project name="Checkout GFv3 sources" default="check-out.all" >

    <property file="${basedir}/build.properties"/>
    <property name="external.dir" value="${basedir}/external" />

    <target name="init">
        <mkdir dir="${external.dir}"/>
    </target>

    <target name="check-out.all" depends="init">
        <echo message="external directory: ${external.dir}"/>
	<ant antfile="trilead-ssh2.xml" target="trilead-ssh2.checkout" />
	<ant antfile="commons-codec.xml" target="commons-codec.checkout" />
        <antcall target="checkout.felix" />
        <ant antfile="servlet-2.5-build.xml" target="checkout"/>
        <ant antfile="schema2beans.xml" target="schema2beans.checkout"/>
        <antcall target="checkout.jaxb" />
        <ant antfile="management-api.xml" target="checkout"/>
        <ant antfile="gmbal.xml" target="checkout"/>
        <ant antfile="glassfish-corba.xml" target="checkout"/>
	<ant antfile="tiger-types.xml" target="tiger-types.checkout" />
	<ant antfile="metainf-services.xml" target="metainf-services.checkout" />
	<ant antfile="bcel.xml" target="bcel.checkout" />
	<ant antfile="jakarta-regexp.xml" target="jakarta-regexp-1.4.checkout"  />
        <ant antfile="bean-validator.xml" target="bean-validator.checkout" />
        <ant antfile="ha-api.xml" target="ha-api.checkout" />
	<ant antfile="hk2.xml" target="hk2.checkout" />
	<ant antfile="grizzly.xml" target="grizzly.checkout" />
        <antcall target="checkout.mojarra" />
        <antcall target="checkout.weld" />
      	<ant antfile="shoal.xml" target="shoal.checkout" />
	<ant antfile="jsr311-api.xml" target="jsr311-api.checkout" /> 
        <ant antfile="mq.xml" target="mq.checkout" /> 
        <ant antfile="javax-jms.xml" target="jms.api.checkout" /> 
	<ant antfile="woodstock.xml" target="woodstock.checkout" /> 
	<ant antfile="jsftemplating.xml" target="jsftemplating.checkout" /> 
	<ant antfile="ldapbp.xml" target="ldapbp.checkout" /> 
	<ant antfile="solarisrealm.xml" target="solrealm.checkout" /> 
	<ant antfile="jaxr-ra.xml" target="jaxr-ra.checkout" /> 
        <antcall target="checkout.slf4j" />
        <ant antfile="mail.xml" target="mail.checkout" />
	<antcall target="checkout.eclipselink" />
        <antcall target="checkout.wsit" />
        <antcall target="checkout.jersey" />
        <ant antfile="opendmk.xml" target="opendmk.checkout" />
        <ant antfile="btrace.xml" target="checkout" />
	<ant antfile="uel.xml" target="uel.checkout" />
	<ant antfile="jsp.xml" target="jsp.checkout" />
	<ant antfile="jstl.xml" target="jstl.checkout" />
        <antcall target="checkout.javahelp" />
	<ant antfile="dbschema.xml" target="dbschema.checkout" />
        <ant antfile="antlr.xml" target="antlr.checkout" />
        <ant antfile="v3-docs.xml" target="v3-docs.checkout" />
        <ant antfile="wsdl4j.xml" target="wsdl4j.checkout" />
        <ant antfile="l10n.xml" target="l10n.checkout" />
        <antcall target="delete.files" />
    </target>


    <target name = "checkout.eclipselink" unless="skip.eclipselink.checkout">
        <echo message="Inside EL checkout"/>
        <!-- Checkout Eclipselink from svn  repo -->
        <exec executable="svn" dir="${external.dir}" failonerror="true" >
            <arg line="checkout" />
            <arg line="${eclipselink.svn.url}" />
            <arg line="eclipselink" />
        </exec>
    </target>

    <target name="delete.files" >
        <delete includeemptydirs="true">    
            <fileset dir="${external.dir}" includes="**/.svn/**,**/.hg*/**" defaultexcludes="false"/>
        </delete>
    </target>


    <macrodef name="svnco">
        <attribute name="url"/>
        <attribute name="name"/>
        <sequential>
            <echo message="checkout @{name} from @{url}."/>
            <exec executable="svn" dir="${external.dir}" failonerror="true">
                <arg line="checkout"/>
                <arg line="@{url} @{name}"/>
            </exec>
        </sequential>
    </macrodef>


    <target name="checkout.felix" >
        <ant antfile="felix-build.xml" target="felix-parent-1.2.0.checkout" />
        <ant antfile="felix-build.xml" target="felix-parent-1.2.1.checkout" />
        <ant antfile="felix-build.xml" target="org.osgi.core-4.1.0.checkout" />
        <ant antfile="felix-build.xml" target="felix-pom-1.0.0.checkout" />
        <ant antfile="felix-build.xml" target="felix.javax.servlet-1.0.0.checkout" />
        <ant antfile="felix-build.xml" target="felix-pom-1.0.1.checkout" />
        <ant antfile="felix-build.xml" target="felix.org.osgi.foundation-1.0.0.checkout" />
        <ant antfile="felix-build.xml" target="org.osgi.compendium-4.0.0.checkout" />
        <ant antfile="felix-build.xml" target="felix.shell-1.4.1.checkout" />
        <ant antfile="felix-build.xml" target="felix-pom-1.0.2.checkout" />
        <ant antfile="felix-build.xml" target="felix.org.osgi.core-1.0.1.checkout" />
        <ant antfile="felix-build.xml" target="felix.org.osgi.service.obr-1.0.2.checkout" />
        <ant antfile="felix-build.xml" target="felix.kxml2-2.2.2.checkout" />
        <ant antfile="felix-build.xml" target="felix.bundlerepository-1.4.2.checkout" />
        <ant antfile="felix-build.xml" target="felix.org.osgi.core-1.0.0.checkout" />
        <ant antfile="felix-build.xml" target="felix.org.osgi.compendium-1.0.0.checkout" />
        <ant antfile="felix-build.xml" target="felix.configadmin-1.2.4.checkout" />
        <ant antfile="felix-build.xml" target="felix.fileinstall-3.1.10.checkout" />
        <ant antfile="felix-build.xml" target="felix.fileinstall-2.0.4.checkout" />
        <ant antfile="felix-build.xml" target="org.osgi.core-4.2.0.checkout" />
        <ant antfile="felix-build.xml" target="org.osgi.compendium-4.2.0.checkout" />
        <ant antfile="felix-build.xml" target="felix.framework-2.0.2.checkout" />
        <ant antfile="felix-build.xml" target="org.osgi.core-4.0.0.checkout" />
        <ant antfile="felix-build.xml" target="felix.main-3.0.8.checkout" />
        <ant antfile="felix-build.xml" target="felix.org.osgi.compendium-1.0.1.checkout" />
        <ant antfile="felix-build.xml" target="felix.shell-1.0.0.checkout" />
        <ant antfile="felix-build.xml" target="felix.shell.remote-1.0.4.checkout" />
        <ant antfile="felix-build.xml" target="felix.shell.remote-1.1.2.checkout" />
        <ant antfile="felix-build.xml" target="felix.scr-1.0.8.checkout" />
        <ant antfile="felix-build.xml" target="felix.scr-1.6.0.checkout" />
        <ant antfile="felix-build.xml" target="felix.org.osgi.core-1.2.0.checkout" />
        <ant antfile="felix-build.xml" target="felix.org.osgi.foundation-1.2.0.checkout" />
        <ant antfile="felix-build.xml" target="felix.org.osgi.compendium-1.2.0.checkout" />
    </target>

    <target name="checkout.jaxb" >
        <ant antfile="jaxb.xml" target="jaxb.checkout"/>
    </target>

    <target name="checkout.mojarra" >
        <ant antfile="mojarra.xml" target="groovy.checkout" />
        <ant antfile="mojarra.xml" target="commons.digester.checkout" />
        <ant antfile="mojarra.xml" target="commons.beanutils.checkout" />
        <ant antfile="mojarra.xml" target="commons.collections.checkout" />
        <ant antfile="mojarra.xml" target="commons.logging.checkout" />
        <ant antfile="mojarra.xml" target="jargs.checkout" />
        <ant antfile="mojarra.xml" target="yuicompressor.checkout" />
        <ant antfile="mojarra.xml" target="mojarra.checkout" />
    </target>

    <target name="checkout.weld" >
        <ant antfile="weld.xml" target="javassist.checkout" />
        <ant antfile="weld.xml" target="guava-libraries.checkout" />
        <ant antfile="weld.xml" target="jboss-interceptor.checkout" />
        <ant antfile="weld.xml" target="javax-inject.checkout" />
        <ant antfile="weld.xml" target="weld-api.checkout" />
        <ant antfile="weld.xml" target="weld-core.checkout" />
    </target>

    <target name="checkout.slf4j" >
        <ant antfile="slf4j.xml" target="slf4j-api.checkout" />
        <ant antfile="slf4j.xml" target="slf4j-api.checkout" />
        <ant antfile="slf4j.xml" target="slf4j-ext.checkout" />
        <ant antfile="slf4j.xml" target="cal10n-api.checkout" />
    </target>

    <target name="checkout.wsit" >
        <ant antfile="wsit.xml" target="ant.checkout" />
        <ant antfile="wsit.xml" target="wsit.checkout" />
        <ant antfile="wsit.xml" target="jaxws.checkout" />
        <ant antfile="wsit.xml" target="stax-ex.checkout" />
        <ant antfile="wsit.xml" target="mimepull.checkout" />
        <ant antfile="wsit.xml" target="istack-commons.checkout" />
        <ant antfile="wsit.xml" target="fi1.checkout" />
        <ant antfile="wsit.xml" target="jaxrpc.checkout" />
        <ant antfile="wsit.xml" target="jaxr-api.checkout" />
        <ant antfile="wsit.xml" target="jaxr-ri.checkout" />

    </target>

    <target name="checkout.jersey" >
        <ant antfile="jersey.xml" target="jettison.checkout" />
        <ant antfile="jersey.xml" target="jackson.checkout" />
        <ant antfile="jersey.xml" target="jersey.checkout" />
    </target>

    <target name="checkout.javahelp" >
        <ant antfile="javahelp.xml" target="jdic.checkout" />
        <ant antfile="javahelp.xml" target="javahelp.checkout" />
    </target>

</project>

